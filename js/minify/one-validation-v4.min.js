const messages={id:{required:"{label} harus diisi",minlength:"Minimal {minLength} karakter",maxlength:"Maksimal {maxLength} karakter",alphabetic:"{label} ini hanya boleh berisi huruf",specialChar:"{label} tidak boleh mengandung karakter khusus: {specialChars}",number:"Nilai harus berupa angka",minValue:"Nilai harus lebih besar atau sama dengan {minValue}",maxValue:"Nilai harus lebih kecil atau sama dengan {maxValue}",email:"Format email tidak valid",file:"{label} harus diisi dengan file",fileType:"Format file harus bertipe: {allowedExtensions}",fileSize:"Ukuran file tidak boleh lebih dari {sizeLimit} {sizeUnit}",minselection:"Minimal {minSelection} pilihan {label}.",maxselection:"Maksimal {maxSelection} pilihan {label}.",noHtml:"{label} tidak boleh mengandung tag HTML"},en:{required:"{label} is required",minlength:"Minimum {minLength} characters",maxlength:"Maximum {maxLength} characters",alphabetic:"{label} can only contain letters",specialChar:"{label} cannot contain special characters: {specialChars}",number:"Value must be a number",minValue:"Value must be greater than or equal to {minValue}",maxValue:"Value must be less than or equal to {maxValue}",email:"Invalid email format",file:"{label} must be filled with a file",fileType:"File format must be one of: {allowedExtensions}",fileSize:"File size cannot exceed {sizeLimit} {sizeUnit}",minselection:"Minimum {minSelection} selection for {label}.",maxselection:"Maximum {maxSelection} selection for {label}.",noHtml:"{label} cannot contain HTML tags"}};let currentLangValidation="id";function getErrorMessage(e){return`\n    <div class="error mt-1" style="font-weight:normal;color:red;font-size:12px;">\n      <em>${e}</em>\n    </div>`}function validation(e,a){const i=$(e).data("errorplace");$(e).removeClass("is-invalid"),i?$(i).html(getErrorMessage(a)):($(e).next(".error").remove(),$(e).after(getErrorMessage(a))),$(e).addClass("is-invalid")}function validationSelect(e,a){const i=$(e).data("errorplace");$(e).hasClass("select2-hidden-accessible")?(i?$(i).html(getErrorMessage(a)):$(e).next(".select2-container").after(getErrorMessage(a)),$(e).next().find(".select2-selection").parent().addClass("has-error")):($(e).next(".error").remove(),i?$(i).html(getErrorMessage(a)):$(e).after(getErrorMessage(a)),$(e).closest(".form-control").addClass("is-invalid"))}function validationRadio(e,a){$(e).closest(".radio-group").find(".error").remove(),$(e).closest(".radio-group").append(getErrorMessage(a)),$(e).closest(".radio-group").addClass("is-invalid")}function validationFile(e,a){$(e).next(".error").remove(),$(e).after(getErrorMessage(a)),$(e).addClass("is-invalid")}function validationCheckbox(e,a){const i=$(e).closest(".checkbox-group");i.find(".error").remove(),i.append(getErrorMessage(a)),i.addClass("is-invalid")}function validationCheckboxRemove(e){$(e).closest(".checkbox-group").find(".error").remove(),$(e).closest(".checkbox-group").removeClass("is-invalid")}function validationRemove(e){const a=$(e).data("errorplace");a?$(a).find(".error").remove():$(e).next(".error").remove(),$(e).removeClass("is-invalid")}function validationSelectRemove(e){const a=$(e).data("errorplace");a&&$(a).find(".error").remove(),$(e).hasClass("select2-hidden-accessible")?($(e).next(".select2-container").next(".error").remove(),$(e).next().find(".select2-selection").parent().removeClass("has-error")):($(e).next(".error").remove(),$(e).closest(".form-control").removeClass("is-invalid"))}function validationRadioRemove(e){const a=$(e).data("errorplace");a&&$(a).find(".error").remove(),$(e).closest(".radio-group").find(".error").remove(),$(e).closest(".radio-group").removeClass("is-invalid")}function validationCheckboxRemove(e){const a=$(e).data("errorplace");a&&$(a).find(".error").remove(),$(e).closest(".checkbox-group").find(".error").remove(),$(e).closest(".checkbox-group").removeClass("is-invalid")}function validationFileRemove(e){const a=$(e).data("errorplace");a&&$(a).find(".error").remove(),$(e).next(".error").remove(),$(e).removeClass("is-invalid")}function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function validateOnInput(e,a){const i=$(e).val(),t=$(e).data("required"),l=$(e).data("minlength"),n=$(e).data("maxlength"),r=$(e).data("isnumber"),o=$(e).data("minvalue"),s=$(e).data("maxvalue"),d=$(e).data("email"),c=$(e).data("alphabetic"),m=$(e).data("specialchar")?$(e).data("specialchar").split(","):[],u=$(e).data("nohtml");validationRemove(e);const v=$(e).data("label")||("en"===a?"This field":"Kolom ini"),h=messages[a]||messages.id;if(t&&""===i.trim())return validation(e,h.required.replace("{label}",v)),!1;if(l&&i.length<l)return validation(e,h.minlength.replace("{minLength}",l).replace("{label}",v)),!1;if(n&&i.length>n)return validation(e,h.maxlength.replace("{maxLength}",n).replace("{label}",v)),!1;if(c&&!/^[A-Za-z\s]+$/.test(i))return validation(e,h.alphabetic.replace("{label}",v)),!1;const p=m.join(", ");for(const a of m)if(i.includes(a.trim()))return validation(e,h.specialChar.replace("{specialChars}",p).replace("{label}",v)),!1;return r&&isNaN(i)?(validation(e,h.number.replace("{label}",v)),!1):o&&parseFloat(i)<o?(validation(e,h.minValue.replace("{minValue}",o).replace("{label}",v)),!1):s&&parseFloat(i)>s?(validation(e,h.maxValue.replace("{maxValue}",s).replace("{label}",v)),!1):d&&!validateEmail(i)?(validation(e,h.email.replace("{label}",v)),!1):!u||!/<[^>]*>/g.test(i)||(validation(e,h.noHtml.replace("{label}",v)),!1)}function validateOnSelect(e,a){const i=$(e).val(),t=$(e).data("required"),l=$(e).data("label")||("en"===a?"This field":"Kolom ini"),n=messages[a]||messages.id;return validationSelectRemove(e),!t||null!==i&&""!==i&&0!==i.length||(validationSelect(e,n.required.replace("{label}",l)),!1)}function validateOnRadio(e,a){const i=$(`input[name="${e}"]:checked`).length>0,t=$(`input[name="${e}"]`).data("required"),l=$(`input[name="${e}"]`).data("label")||("en"===a?"This field":"Kolom ini"),n=messages[a]||messages.id;return validationRadioRemove($(`input[name="${e}"]`)),!(t&&!i)||(validationRadio($(`input[name="${e}"]`),n.required.replace("{label}",l)),!1)}function validateOnFile(e,a){const i=$(e).data("required"),t=$(e).data("extfile"),l=$(e).data("typesize")||"mb",n=parseFloat($(e).data("size")),r=$(e)[0].files[0],o=$(e).data("label")||("en"===a?"This field":"Kolom ini"),s=messages[a]||messages.id;if(validationRemove(e),i&&!r)return validation(e,s.required.replace("{label}",o)),!1;if(r){const a=r.name.toLowerCase().split(".").pop(),i=t.split(","),d=i.join(", ");if(!i.includes(a))return validation(e,s.extfile.replace("{allowedExtensions}",d).replace("{label}",o)),!1;const c=r.size/1048576,m=r.size/1024;if("mb"===l&&c>n)return validation(e,s.sizeMB.replace("{sizeLimit}",n).replace("{label}",o)),!1;if("kb"===l&&m>n)return validation(e,s.sizeKB.replace("{sizeLimit}",n).replace("{label}",o)),!1}return!0}function validateOnCheckbox(e,a){const i=$(`input[name="${e}"]`),t=$(`input[name="${e}"]:checked`).length,l=$(i).data("required"),n=$(i).data("minselection"),r=$(i).data("maxselection"),o=$(i).data("label")||("en"===a?"This field":"Kolom ini"),s=messages[a]||messages.id;return validationCheckboxRemove(i),l&&0===t?(validationCheckbox(i,s.required.replace("{label}",o)),!1):n&&t<n?(validationCheckbox(i,s.minselection.replace("{minSelection}",n).replace("{label}",o)),!1):!(r&&t>r)||(validationCheckbox(i,s.maxselection.replace("{maxSelection}",r).replace("{label}",o)),!1)}function initValidationOnInput({lang:e="id"}={}){currentLangValidation=e,$(".validate-text").on("input",function(){validateOnInput(this,currentLangValidation)}),$(".validate-select").on("change",function(){validateOnSelect(this,currentLangValidation)}),$(".validate-radio").on("change",function(){validateOnRadio($(this).attr("name"),currentLangValidation)}),$(".validate-file").on("change",function(){validateOnFile(this,currentLangValidation)}),$(".validate-checkbox").on("change",function(){validateOnCheckbox(this,currentLangValidation)})}function isValidForm(e=null){let a=!0;const i=e?$(e):$(document);return i.find(".validate-text").each(function(){validateOnInput(this,currentLangValidation)||(a=!1)}),i.find(".validate-select").each(function(){validateOnSelect(this,currentLangValidation)||(a=!1)}),i.find(".validate-radio").each(function(){validateOnRadio($(this).attr("name"),currentLangValidation)||(a=!1)}),i.find(".validate-file").each(function(){$(this).data("required")&&!validateOnFile(this,currentLangValidation)&&(a=!1)}),i.find(".validate-checkbox").each(function(){validateOnCheckbox($(this).attr("name"),currentLangValidation)||(a=!1)}),a}function handleCodeIgniterError(e){e.error_class.forEach((a,i)=>{const t=e.error_string[i],l=$(`[name="${a}"]`);if(l.hasClass("select2")){validationSelect(l.is("[multiple]")?`[name="${a}[]"]`:`[name="${a}"]`,t)}else"radio"===l.attr("type")?validationRadio(`[name="${a}"]`,t):"file"===l.attr("type")?validationFile(`[name="${a}"]`,t):validation(`[name="${a}"]`,t)})}function handleLaravelError(e){Object.keys(e.errors).forEach(a=>{const i=e.errors[a][0],t=$(`[name="${a}"]`);if(t.hasClass("select2")){const e=t.data("select2").options.options.multiple;console.log(e),e?(validationSelect(`[name="${a}[]"]`,i),console.log(`Validating multiple select: [name="${a}[]"]`)):validationSelect(`[name="${a}"]`,i)}else"radio"===t.attr("type")?validationRadio(`[name="${a}"]`,i):"file"===t.attr("type")?validationFile(`[name="${a}"]`,i):validation(`[name="${a}"]`,i)})}function handleCodeIgniterErrorClass(e){e.error_class.forEach((a,i)=>{const t=e.error_string[i],l=$(`.vl_${a}`);if(l.hasClass("select2")){validationSelect(l.is("[multiple]")?`[name="${a}[]"]`:`[name="${a}"]`,t)}else"radio"===l.attr("type")?validationRadio(`[name="${a}"]`,t):"file"===l.attr("type")?validationFile(`[name="${a}"]`,t):validation(`[name="${a}"]`,t)})}function handleLaravelErrorClass(e){Object.keys(e.errors).forEach(a=>{const i=e.errors[a][0],t=$(`.vl_${a}`);if(t.hasClass("select2")){validationSelect(t.data("select2").options.options.multiple?`[name="${a}[]"]`:`[name="${a}"]`,i)}else"radio"===t.attr("type")?validationRadio(`[name="${a}"]`,i):"file"===t.attr("type")?validationFile(`[name="${a}"]`,i):validation(`[name="${a}"]`,i)})}function validateFormRules(e,a,i="id"){let t=!0;const l=$(e);return Object.keys(a).forEach(e=>{const n=a[e],r=l.find(e).length>0?l.find(e):$(`[name="${e}"]`);if(0===r.length)return;n.rules.forEach(e=>{const[a,i]=e.split(":");switch(a){case"required":r.data("required",!0);break;case"alphabetic":r.data("alphabetic",!0);break;case"number":r.data("isnumber",!0);break;case"email":r.data("email",!0);break;case"no_html":r.data("nohtml",!0);break;case"min":r.data("minlength",parseInt(i));break;case"max":r.data("maxlength",parseInt(i));break;case"min_val":r.data("minvalue",parseFloat(i));break;case"max_val":r.data("maxvalue",parseFloat(i));break;case"mimes":r.data("extfile",i);break;case"size":r.data("size",parseFloat(i));break;case"not_regex":r.data("specialchar",i);break;case"size_type":r.data("typesize",i)}});const o=n.type.toLowerCase();"text"===o?r.addClass("validate-text"):"select"===o?r.addClass("validate-select"):"radio"===o?r.addClass("validate-radio"):"file"===o?r.addClass("validate-file"):"checkbox"===o&&r.addClass("validate-checkbox");let s=!0;"text"===o?s=validateOnInput(r[0],i):"select"===o?s=validateOnSelect(r[0],i):"radio"===o?s=validateOnRadio(r.attr("name"),i):"file"===o?s=validateOnFile(r[0],i):"checkbox"===o&&(s=validateOnCheckbox(r.attr("name"),i)),s||(t=!1)}),initValidationOnInput({lang:i}),t}